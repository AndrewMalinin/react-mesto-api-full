{"version":3,"sources":["contexts/CurrentUserContext.js","images/avatar-empty.jpg","utils/api.js","components/PopupWithForm.js","components/AddPlacePopup.js","components/EditAvatarPopup.js","components/EditProfilePopup.js","components/ProtectedRoute.js","components/Footer.js","components/Header.js","images/damaged-photo.jpg","components/ImagePopup.js","components/Card.js","components/Main.js","utils/auth.js","components/Login.js","components/InfoTooltip.js","components/Register.js","components/App.js","index.js"],"names":["defaultUserInfo","name","about","avatar","CurrentUserContext","React","createContext","Api","baseUrl","token","this","_baseUrl","_token","relativePath","method","bodyObject","options","headers","authorization","localStorage","getItem","mode","url","Object","keys","length","body","JSON","stringify","fetch","then","res","ok","json","Promise","reject","_sendRequest","link","cardId","avatarLink","api","PopupWithForm","className","props","isOpen","id","type","onClick","onClose","action","onSubmit","title","children","submitButtonText","PureComponent","AddPlacePopup","handleSubmit","e","preventDefault","onAddPlace","state","photoLink","handleTitleChange","setState","target","value","handlePhotoLinkChange","placeholder","required","minLength","maxLength","onChange","EditAvatarPopup","onUpdateAvatar","avatarLinkInput","current","createRef","ref","EditProfilePopup","onUpdateUser","description","handleNameChange","hasInteract","handleDescriptionChange","context","contextType","ProtectedRoute","loggedIn","to","Footer","Component","Header","userEmail","onActionButtonClick","buttonText","ImagePopup","handleCardImageLoadingError","src","damagedPhoto","card","alt","onError","Card","handleClick","onCardClick","isOwn","owner","_id","isLiked","likes","some","onCardDelete","onCardLike","Main","handleCardClick","onEditAvatar","onEditProfile","cards","map","cardProperties","BASE_URL","Auth","email","password","resolve","response","status","catch","err","data","setItem","Login","handleEmailChanged","handlePasswordChanged","authorize","onLogin","console","log","InfoTooltip","Register","register","Error","isRegisterSuccess","isInfoTooltipOpen","infoTooltipDescription","infoTooltipType","handleTooltipClose","onRegister","App","navigate","useNavigate","location","useLocation","useState","setLoggedIn","setCards","setUserEmail","currentUser","setCurrentUser","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","selectedCard","setSelectedCard","headerActionButtonText","setHeaderActionButtonText","_api","useEffect","pathname","handleMainPageLoaded","tokenCheck","all","getUserInfo","getCardSet","userData","handleLogout","removeItem","getContent","closeAllPopups","Provider","path","element","sendDeleteLikeCardRequest","sendPutLikeCardRequest","newCard","c","sendDeleteCardRequest","filter","placeInfo","sendAddNewCardRequest","sendUpdateUserAvatarRequest","userInfo","newUserInfo","sendEditProfileRequest","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.adb77cdf.chunk.js","sourcesContent":["import React from \"react\";\nimport defaultProfileImage from '../images/avatar-empty.jpg';\n\nexport const defaultUserInfo = {\n  name: '',\n  about: '',\n  avatar: defaultProfileImage\n}\n\nexport const CurrentUserContext = React.createContext(defaultUserInfo);\n","export default __webpack_public_path__ + \"static/media/avatar-empty.7386cdfa.jpg\";","export class Api {\n  constructor({baseUrl, token}) {\n    this._baseUrl = baseUrl;\n    this._token = token;\n  }\n\n  _sendRequest(relativePath, method = 'GET', bodyObject = {}) {\n\n    const options = {\n      'method': method,\n      headers: {\n        authorization: 'Bearer ' + localStorage.getItem(\"token\"),\n        'Content-Type': 'application/json'\n      },\n      mode: \"cors\",\n    };\n    const url = this._baseUrl + relativePath;\n\n    if (Object.keys(bodyObject).length !== 0) {\n      options.body = JSON.stringify(bodyObject);\n    }\n\n    return fetch(url, options)\n      .then((res) => {\n        if(res.ok) {\n          return res.json();\n        }\n        else {\n          return Promise.reject();\n        }\n      });\n  }\n\n  getUserInfo() {\n    return this._sendRequest('/users/me');\n  }\n\n  getCardSet() {\n    return this._sendRequest('/cards');\n  }\n\n  sendEditProfileRequest({name, about}) {\n    return this._sendRequest('/users/me', 'PATCH', {\n        'name': name,\n        'about': about\n      });\n  }\n\n  sendAddNewCardRequest({name, link}) {\n    return this._sendRequest('/cards', 'POST', {\n        'name': name,\n        'link': link\n      });\n  }\n\n  sendDeleteCardRequest(cardId) {\n    return this._sendRequest(`/cards/${cardId}`, 'DELETE');\n  }\n\n  sendPutLikeCardRequest(cardId) {\n    return this._sendRequest(`/cards/${cardId}/likes`, 'PUT');\n  }\n\n  sendDeleteLikeCardRequest(cardId) {\n    return this._sendRequest(`/cards/${cardId}/likes`, 'DELETE');\n  }\n\n  sendUpdateUserAvatarRequest(avatarLink) {\n    return this._sendRequest('/users/me/avatar', 'PATCH', {\n        avatar: avatarLink\n      });\n  }\n}\n\n\nexport const api = new Api({\n  baseUrl : `https://practicum.malinin-back.nomoredomains.xyz`\n});\n","import React from \"react\";\n\nexport default class PopupWithForm extends React.PureComponent {\n\n  render() {\n    return (\n      <div className={`popup ${this.props.isOpen ? 'popup_opened' : ''}`} id={`${this.props.name}-popup`}>\n        <div className=\"popup__container\">\n          <button type=\"button\" className=\"popup__close-button\" onClick={this.props.onClose}></button>\n          <form\n            action=\"#\"\n            className=\"popup__form form\"\n            id={`${this.props.name}-form`}\n            name={`${this.props.name}-form`}\n            onSubmit={this.props.onSubmit}\n          >\n            <h2 className=\"form__heading\">{this.props.title}</h2>\n            <fieldset className=\"form__input-container\">\n              {this.props.children}\n            </fieldset>\n            <button type=\"submit\" className=\"form__submit-button\">{this.props.submitButtonText}</button>\n          </form>\n        </div>\n      </div>\n    );\n  }\n}\n","import React from \"react\";\nimport PopupWithForm from \"./PopupWithForm\";\n\nexport default class AddPlacePopup extends React.PureComponent {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      title: '',\n      photoLink: ''\n    }\n  }\n\n  handleSubmit=(e)=>{\n    e.preventDefault();\n    this.props.onAddPlace({\n      name: this.state.title,\n      link: this.state.photoLink\n    })\n  }\n\n  handleTitleChange=(e)=>{\n    this.setState({title: e.target.value})\n  }\n\n  handlePhotoLinkChange=(e)=>{\n    this.setState({photoLink: e.target.value})\n  }\n\n\n\n  render() {\n    return (\n      <PopupWithForm name=\"add-card\" title=\"Новое место\" isOpen={this.props.isOpen} onClose={this.props.onClose} onSubmit={this.handleSubmit} submitButtonText=\"Создать\">\n        <input type=\"text\" className=\"form__item\" id=\"title-input\" name=\"title\" placeholder=\"Название\" required minLength=\"2\" maxLength=\"30\" value={this.state.title} onChange={this.handleTitleChange}/>\n        <span className=\"form__input-error title-input-error\"></span>\n        <input type=\"url\" className=\"form__item\" id=\"photo-link-input\" name=\"photo-link\" placeholder=\"Ссылка на картинку\" required value={this.state.photoLink} onChange={this.handlePhotoLinkChange}/>\n        <span className=\"form__input-error photo-link-input-error\"></span>\n      </PopupWithForm>\n    );\n  }\n}\n\n\n","import React from \"react\";\nimport PopupWithForm from \"./PopupWithForm\";\n\nexport default class EditAvatarPopup extends React.PureComponent {\n\n  constructor(props) {\n    super(props);\n    this.avatarLinkInput = React.createRef();\n  }\n\n  handleSubmit=(e)=>{\n    e.preventDefault();\n    this.props.onUpdateAvatar({\n      avatar: this.avatarLinkInput.current.value,\n    });\n  }\n\n  render() {\n    return (\n      <PopupWithForm name=\"update-avatar\" title=\"Обновить аватар\" isOpen={this.props.isOpen} onClose={this.props.onClose} onSubmit={this.handleSubmit} submitButtonText=\"Сохранить\">\n        <input type=\"url\" className=\"form__item\" id=\"avatar-link-input\" name=\"avatar-link\" placeholder=\"Ссылка на новый аватар\" required ref={this.avatarLinkInput}/>\n        <span className=\"form__input-error avatar-link-input-error\"></span>\n    </PopupWithForm>\n    );\n  }\n}\n\n","import React from \"react\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\nimport PopupWithForm from \"./PopupWithForm\";\n\nexport default class EditProfilePopup extends React.PureComponent {\n  static contextType = CurrentUserContext;\n  constructor(props) {\n    super(props);\n    this.state = {\n      name: '',\n      description: ''\n    }\n    this.hasInteract = false; // Флаг, изменял ли пользователь поля\n  }\n\n  handleSubmit=(e)=>{\n    e.preventDefault();\n    this.props.onUpdateUser({\n      name: this.state.name,\n      about: this.state.description,\n    });\n  }\n\n  componentDidMount() {\n    this.setState({name: this.context.name})\n    this.setState({description: this.context.about})\n  }\n\n  componentDidUpdate() {\n    if (this.state.name === '' && this.state.description === '' && !this.hasInteract) {\n      this.setState({name: this.context.name})\n      this.setState({description: this.context.about})\n    }\n  }\n\n  handleNameChange=(e)=>{\n    this.setState({name: e.target.value})\n    this.hasInteract = true;\n  }\n\n  handleDescriptionChange=(e)=>{\n    this.setState({description: e.target.value})\n    this.hasInteract = true;\n  }\n\n  render() {\n    return (\n      <PopupWithForm name=\"edit-profile\" title=\"Редактировать профиль\" isOpen={this.props.isOpen} onClose={this.props.onClose} onSubmit={this.handleSubmit} submitButtonText=\"Сохранить\">\n        <input type=\"text\" className=\"form__item\" id=\"name-input\" name=\"name\" placeholder=\"Введите имя\" required minLength=\"2\" maxLength=\"40\" value={this.state.name} onChange={this.handleNameChange}/>\n        <span className=\"form__input-error name-input-error\"></span>\n        <input type=\"text\" className=\"form__item\" id=\"status-input\" name=\"status\" placeholder=\"О Себе\" required minLength=\"2\" maxLength=\"200\" value={this.state.description} onChange={this.handleDescriptionChange}/>\n        <span className=\"form__input-error status-input-error\"></span>\n      </PopupWithForm>\n    );\n  }\n}\n","import React from \"react\";\nimport {Navigate } from \"react-router-dom\";\n\nfunction ProtectedRoute(props) {\n  return (props.loggedIn ? props.children : <Navigate to={\"/signin\"} />);\n}\n\nexport default ProtectedRoute;\n","import React from \"react\";\n\nexport default class Footer extends React.Component {\n\n    render() {\n        return (\n            <footer className=\"footer\">\n                <p className=\"footer__copyright\">© 2020 Mesto Russia</p>\n          </footer>\n        );\n    }\n}\n","import React from \"react\";\n\nexport default class Header extends React.Component {\n\n    render() {\n        return (\n            <header className=\"header\">\n                <div className=\"header__logo\"></div>\n                <div className=\"auth-info\">\n                  <p className=\"auth-info__email\">{this.props.userEmail}</p>\n                  <button className=\"auth-info__action-button button\" onClick={this.props.onActionButtonClick}>{this.props.buttonText}</button>\n                </div>\n            </header>\n        );\n    }\n}\n","export default __webpack_public_path__ + \"static/media/damaged-photo.c17a075c.jpg\";","import React from \"react\";\nimport damagedPhoto  from '../images/damaged-photo.jpg';\n\nexport default class ImagePopup extends React.Component {\n\n  handleCardImageLoadingError=(e)=> {\n    e.target.src = damagedPhoto;\n  }\n\n  render() {\n    const title = this.props.card ? this.props.card.name : ''\n    const link = this.props.card ? this.props.card.link : '';\n    return (\n      <div className={`popup ${this.props.card ? 'popup_opened' : ''}`} id=\"photo-popup\">\n        <div className=\"popup__container\">\n          <button type=\"button\" className=\"popup__close-button\"onClick={this.props.onClose}></button>\n          <img src={link} alt={title} className=\"popup__photo\" onError={this.handleCardImageLoadingError}/>\n          <h2 className =\"popup__photo-title\">{title}</h2>\n        </div>\n      </div>\n    );\n  }\n}\n","import React from \"react\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\nimport damagedPhoto  from '../images/damaged-photo.jpg';\n\nexport default class Card extends React.Component {\n  static contextType = CurrentUserContext;\n\n  handleClick=()=>{\n    this.props.onCardClick(this.props.card);\n  }\n\n  handleCardImageLoadingError=(e)=> {\n    e.target.src = damagedPhoto;\n  }\n\n\n  render() {\n    // Определяем, являемся ли мы владельцем текущей карточки\n    const isOwn = this.props.card.owner === this.context._id;\n    const isLiked = this.props.card.likes.some(id => id === this.context._id);\n\n    return (\n      <article className=\"photo-card\">\n        {isOwn &&\n                <button\n                type=\"button\"\n                className=\"photo-card__delete-button delete-button\"\n                onClick={()=>{this.props.onCardDelete(this.props.card)}}\n              ></button>\n        }\n        <img\n          src={this.props.card.link}\n          alt={this.props.card.name}\n          className=\"photo-card__photo\"\n          onError={this.handleCardImageLoadingError}\n          onClick={this.handleClick}\n        />\n        <div className=\"photo-card__info\">\n          <h2 className=\"photo-card__title\">{this.props.card.name}</h2>\n          <div className=\"photo-card__likes\">\n            <button\n              type=\"button\"\n              className={`photo-card__like-button like-button ${isLiked ? 'like-button_filled': ''}`}\n              onClick={()=>{this.props.onCardLike(this.props.card)}}\n            ></button>\n            <p className=\"photo-card__likes-counter\">{this.props.card.likes.length}</p>\n          </div>\n        </div>\n      </article>\n    );\n  }\n}\n","import React from \"react\";\nimport Card from \"./Card\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\n\n\nexport default class Main extends React.Component {\n    static contextType = CurrentUserContext;\n\n    handleCardClick=(card)=>{\n      this.props.onCardClick(card)\n    }\n\n    render() {\n        return (\n            <main className=\"content\">\n            <section className=\"profile\">\n              <div className=\"profile__avatar-container\">\n                <img src={this.context.avatar} alt=\"Аватар пользователя\" className=\"profile__avatar\"/>\n                <div className=\"profile__avatar-overlay\" onClick={this.props.onEditAvatar}></div>\n              </div>\n              <div className=\"profile__info\">\n                <div className=\"profile__editable-parametr\">\n                  <h1 className=\"profile__name\">{this.context.name}</h1>\n                  <button type=\"button\" className=\"profile__edit-button edit-button\" onClick={this.props.onEditProfile}></button>\n                </div>\n                <h2 className=\"profile__status\">{this.context.about}</h2>\n              </div>\n              <button type=\"button\" className=\"profile__add-button add-button\" onClick={this.props.onAddPlace}></button>\n            </section>\n            <section className=\"photo-cards\">\n            {this.props.cards.map((cardProperties) => (\n\n              <Card key={cardProperties._id} card={cardProperties} onCardClick={this.handleCardClick} onCardLike={this.props.onCardLike} onCardDelete={this.props.onCardDelete}/>\n            ))}\n            </section>\n          </main>\n        );\n    }\n}\n","export const BASE_URL = \"https://practicum.malinin-back.nomoredomains.xyz\";\n\nexport default class Auth {\n  static register(email, password) {\n    return new Promise((resolve, reject)=>{\n      fetch(`${BASE_URL}/signup`, {\n        method: \"POST\",\n        headers: {\n\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({ password, email }),\n        mode: 'cors'\n      })\n      .then((response) => {\n        if (response.status === 200 || response.status === 201) {\n          resolve(response.json());\n        }\n        else if (response.status === 400) {\n          reject(\"Field isn't correct\");\n        }\n        else {\n          reject(\"Undefined error\");\n        }\n      })\n      .catch((err) => {\n        reject(err);\n      });\n    })\n\n  }\n\n  static authorize(email, password) {\n    return new Promise((resolve, reject)=>{\n      fetch(`${BASE_URL}/signin`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({ password, email }),\n        mode: \"cors\",\n      })\n      .then((response) => {\n        if (response.status === 200) {\n          return response.json();\n        }\n        else if (response.status === 400) {\n          reject(\"Field isn't correct\");\n        }\n        else if (response.status === 401) {\n          reject(\"User not found\");\n        }\n        else {\n          reject(\"Undefined error\");\n        }\n      })\n      .then((data) => {\n        if (data.token) {\n          localStorage.setItem(\"token\", data.token);\n          resolve(data);\n        }\n      })\n      .catch((err) => {\n        reject(err);\n      });\n    });\n  }\n\n  static getContent(token) {\n    return new Promise((resolve, reject)=>{\n      return fetch(`${BASE_URL}/users/me`, {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          authorization: `Bearer ${token}`,\n        },\n        mode: \"cors\",\n      })\n      .then((response) => {\n        if (response.status === 200) {\n          resolve(response.json());\n        }\n        else if (response.status === 400) {\n          reject(\"Wrong token format\");\n        }\n        else if (response.status === 401) {\n          reject(\"Token is incorrect\");\n        }\n        else {\n          reject(\"Undefined error\");\n        }\n      })\n      .catch((err) => {\n        reject(err);\n      });\n    })\n  }\n}\n","import React from \"react\";\nimport Auth from \"../utils/auth\";\n\nexport default class Login extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      email : '',\n      password :''\n    }\n  }\n\n  componentDidUpdate() {\n    if(this.props.loggedIn) {\n      this.props.onLogin();\n    }\n  }\n\n  handleEmailChanged=(e)=>{\n    this.setState({email: e.target.value})\n  }\n\n  handlePasswordChanged=(e)=>{\n    this.setState({password: e.target.value})\n  }\n\n  handleSubmit=(e)=> {\n    e.preventDefault();\n    if (!this.state.email || !this.state.password){\n      return;\n    }\n\n    Auth.authorize(this.state.email, this.state.password)\n    .then((data) => {\n      if (data.token){\n        this.setState({email: '', password: ''} ,() => {\n            this.props.onLogin();\n        })\n      }\n    })\n    .catch(err => console.log(err));\n  }\n\n  render() {\n      return (\n        <div className='auth-form-container'>\n          <form\n          action=\"#\"\n          className=\"auth-form\"\n          id='login-form'\n          name='login-form'\n          onSubmit={this.handleSubmit}\n        >\n          <h2 className=\"auth-form__heading\">Вход</h2>\n          <fieldset className=\"auth-form__input-container\">\n            <input type=\"email\" className=\"auth-form__item\" id=\"email-input\" name=\"email-input\" placeholder=\"Email\" required value={this.state.email} onChange={this.handleEmailChanged}/>\n            <span className=\"auth-form__input-error email-input-error\"></span>\n\n            <input type=\"password\" className=\"auth-form__item\" id=\"password-input\" name=\"password-input\" placeholder=\"Пароль\" required value={this.state.password} onChange={this.handlePasswordChanged}/>\n            <span className=\"auth-form__input-error password-input-error\"></span>\n          </fieldset>\n          <button type=\"submit\" className=\"auth-form__submit-button\">{this.props.submitButtonText}</button>\n        </form>\n      </div>\n      );\n  }\n}\n","import React from \"react\";\n\nexport default class InfoTooltip extends React.Component {\n\n  render() {\n    return (\n      <div className={`popup ${this.props.isOpen ? 'popup_opened' : ''}`} id='info-tooltip-popup'>\n      <div className=\"popup__container\">\n        <button type=\"button\" className=\"popup__close-button\" onClick={this.props.onClose}></button>\n        <div className=\"info-tooltip\">\n          <div className={`info-tooltip__icon info-tooltip__icon_${this.props.type}`}></div>\n          <p className=\"info-tooltip__description\">{this.props.description}</p>\n        </div>\n      </div>\n    </div>\n    );\n  }\n}\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport Auth from \"../utils/auth\";\nimport InfoTooltip from \"./InfoTooltip\";\n\nexport default class Register extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isRegisterSuccess: false,\n      email : '',\n      password :'',\n      isInfoTooltipOpen: false,\n      infoTooltipDescription: 'error',\n      infoTooltipType: ''\n    }\n  }\n\n  handleEmailChanged=(e)=>{\n    this.setState({email: e.target.value})\n  }\n\n  handlePasswordChanged=(e)=>{\n    this.setState({password: e.target.value})\n  }\n\n  handleSubmit=(e)=>{\n    e.preventDefault();\n      Auth.register(this.state.email, this.state.password)\n      .then((res) => {\n        if(res){\n          this.setState({\n            email: '',\n            password: ''\n          }, () => {\n            this.setState({isRegisterSuccess: true});\n            this.setState({isInfoTooltipOpen: true});\n            this.setState({infoTooltipDescription: \"Вы успешно зарегистрировались!\"});\n            this.setState({infoTooltipType: \"success\"});\n          })\n        }\n        else {\n          throw new Error('response from server is not a valid'); //ловим в следущем catch\n        }\n    })\n    .catch(()=>{\n      this.setState({isRegisterSuccess: false});\n      this.setState({isInfoTooltipOpen: true});\n      this.setState({infoTooltipDescription: \"Что-то пошло не так! Попробуйте ещё раз.\"});\n      this.setState({infoTooltipType: \"error\"});\n    })\n  }\n\n  handleTooltipClose=()=>{\n    this.setState({isInfoTooltipOpen: false});\n    if (this.state.isRegisterSuccess) {\n      this.props.onRegister();\n    }\n  }\n\n  render() {\n      return (\n        <div className='auth-form-container'>\n          <form\n          action=\"#\"\n          className=\"auth-form\"\n          id='register-form'\n          name='register-form'\n          onSubmit={this.handleSubmit}\n        >\n          <h2 className=\"auth-form__heading\">Регистрация</h2>\n          <fieldset className=\"auth-form__input-container\">\n            <input type=\"email\" className=\"auth-form__item\" id=\"email-input\" name=\"email-input\" placeholder=\"Email\" required value={this.state.email} onChange={this.handleEmailChanged}/>\n            <input type=\"password\" className=\"auth-form__item\" id=\"password-input\" name=\"password-input\" placeholder=\"Пароль\" required value={this.state.password} onChange={this.handlePasswordChanged}/>\n          </fieldset>\n          <button type=\"submit\" className=\"auth-form__submit-button\">{this.props.submitButtonText}</button>\n          <Link to=\"/signin\" className='auth-form__sign-in-link'>\n            Уже зарегистрированы? Войти\n          </Link>\n          <InfoTooltip isOpen={this.state.isInfoTooltipOpen} type={this.state.infoTooltipType} description={this.state.infoTooltipDescription} onClose={this.handleTooltipClose}>\n\n          </InfoTooltip>\n        </form>\n      </div>\n      );\n  }\n}\n","import React from \"react\";\nimport { Routes, Route, useNavigate, useLocation} from \"react-router-dom\";\nimport { CurrentUserContext, defaultUserInfo } from \"../contexts/CurrentUserContext\";\nimport { api } from \"../utils/api\";\nimport AddPlacePopup from \"./AddPlacePopup\";\nimport EditAvatarPopup from \"./EditAvatarPopup\";\nimport EditProfilePopup from \"./EditProfilePopup\";\nimport ProtectedRoute from \"./ProtectedRoute\";\nimport Footer from \"./Footer\";\nimport Header from \"./Header\";\nimport ImagePopup from \"./ImagePopup\";\nimport Main from \"./Main\";\nimport Login from \"./Login\";\nimport Register from \"./Register\";\nimport Auth from \"../utils/auth\";\n\n\nexport default function App(props) {\n  const navigate = useNavigate();\n  const location = useLocation();\n  const [loggedIn, setLoggedIn] =                             React.useState(false);\n  const [cards, setCards] =                                   React.useState([]);\n  const [userEmail, setUserEmail] =                           React.useState('');\n  const [currentUser, setCurrentUser] =                       React.useState(defaultUserInfo);\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] =       React.useState(false);\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] =   React.useState(false);\n  const [selectedCard, setSelectedCard] =                     React.useState(null);\n  const [headerActionButtonText, setHeaderActionButtonText] = React.useState('');\n  const _api = api;\n\n  React.useEffect(() => {\n    // eslint-disable-next-line default-case\n    switch (location.pathname) {\n        case '/signin':\n          setHeaderActionButtonText('Регистрация');\n          return;\n        case '/signup':\n          setHeaderActionButtonText('Войти');\n          return;\n        case '/':\n          handleMainPageLoaded();\n          setHeaderActionButtonText('Выйти');\n        return;\n    }\n\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [location])\n\n  const headerActionButtonCallback = () => {\n    switch (headerActionButtonText) {\n      case 'Войти':\n        navigate('/signin');\n        return;\n      case 'Выйти':\n        handleLogout();\n        return;\n      case 'Регистрация':\n        navigate('/signup');\n        return;\n      default:\n        console.log(`Произошла ошибка при нажатии на кнопку ${headerActionButtonText}`);\n        return;\n    }\n  }\n\n  const handleMainPageLoaded=()=>{\n    tokenCheck()\n    .then(()=>{\n      Promise.all([api.getUserInfo(), api.getCardSet()])\n      .then(([ userData, cards]) => {\n        setCurrentUser(userData);\n        setCards(cards);\n      })\n      .catch(()=>{\n        console.log('При запросе данных с сервера возникла ошибка')\n      })\n    })\n\n  }\n\n  const handleLogout = () => {\n    localStorage.removeItem('token');\n    setUserEmail('');\n    setLoggedIn(false);\n    navigate('/signin');\n  }\n\n  const handleLogin = () => {\n    setLoggedIn(true);\n    navigate('/');\n  }\n\n  const handleRegister = () => {\n    navigate('/signin');\n  }\n\n  const tokenCheck = () => {\n    return new Promise((resolve, reject)=>{\n      const token = localStorage.getItem('token');\n      if (token){\n        Auth.getContent(token)\n        .then((res) => {\n          if (res){\n            setLoggedIn(true);\n            setUserEmail(res.email);\n            resolve();\n          }\n          reject();\n        })\n        .catch(()=>{\n          console.log('При проверке токена пользователя произошла ошибка');\n          reject();\n        })\n      }\n    })\n\n  }\n\n  const handleCardClick = (card) => {\n    setSelectedCard(card)\n  }\n\n  const closeAllPopups = () => {\n    setIsEditAvatarPopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setIsEditProfilePopupOpen(false);\n    setSelectedCard(null);\n  }\n\n  const handleEditAvatarClick = () => {\n    setIsEditAvatarPopupOpen(!isEditAvatarPopupOpen);\n  }\n\n  const handleEditProfileClick = () => {\n    setIsEditProfilePopupOpen(!isEditProfilePopupOpen)\n  }\n\n  const handleAddPlaceClick = () => {\n    setIsAddPlacePopupOpen(!isAddPlacePopupOpen);\n  }\n\n  const handleUpdateUser = (newUserInfo) => {\n    _api.sendEditProfileRequest(newUserInfo)\n    .then((userInfo)=>{\n      setCurrentUser(userInfo)\n      closeAllPopups();\n    })\n    .catch(()=>{\n      console.log('При установке новых данных пользователя возникла ошибка')\n    })\n  }\n\n  const handleUpdateAvatar = ({avatar}) => {\n    _api.sendUpdateUserAvatarRequest(avatar)\n    .then((userInfo)=>{\n      setCurrentUser(userInfo);\n      closeAllPopups();\n    })\n    .catch(()=>{\n      console.log('При установке новых данных пользователя возникла ошибка')\n    })\n  }\n\n  const handleCardLike = (card) => {\n    const isLiked = card.likes.some(id => id === currentUser._id);\n\n    const sendRequest=()=>{\n      return isLiked ?\n      _api.sendDeleteLikeCardRequest(card._id) :\n      _api.sendPutLikeCardRequest(card._id);\n    }\n\n    sendRequest()\n    .then((newCard) => {\n      setCards(cards.map((c) => c._id === card._id ? newCard : c));\n    })\n    .catch(()=>{\n      console.log('При установке лайка произошла ошибка')\n    })\n  }\n\n  const handleCardDelete = (card) => {\n    _api.sendDeleteCardRequest(card._id)\n    .then(()=>{\n      setCards(cards.filter((c) => c._id !== card._id));\n    })\n    .catch(()=>{\n      console.log('При удалении карточки возникла ошибка')\n    })\n  }\n\n  const handleAddPlaceSubmit = (placeInfo) => {\n    _api.sendAddNewCardRequest(placeInfo)\n    .then((newCard)=>{\n      setCards([newCard, ...cards]);\n      closeAllPopups();\n    })\n    .catch(()=>{\n      console.log('При добавлении новой карточки возникла ошибка')\n    })\n  }\n\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n        <div className=\"page\">\n\n          <Header buttonText={headerActionButtonText} userEmail={userEmail} onActionButtonClick={headerActionButtonCallback}/>\n\n          <Routes>\n            <Route path=\"*\" element={\n              <ProtectedRoute loggedIn={loggedIn}>\n                <Main\n                  cards={cards}\n                  onEditProfile={handleEditProfileClick}\n                  onAddPlace={handleAddPlaceClick}\n                  onEditAvatar={handleEditAvatarClick}\n                  onCardClick={handleCardClick}\n                  onCardLike={handleCardLike}\n                  onCardDelete={handleCardDelete}\n                  />\n                <Footer />\n                <AddPlacePopup isOpen={isAddPlacePopupOpen} onClose={closeAllPopups} onAddPlace={handleAddPlaceSubmit}/>\n                <EditAvatarPopup isOpen={isEditAvatarPopupOpen} onClose={closeAllPopups} onUpdateAvatar={handleUpdateAvatar}/>\n                <ImagePopup card={selectedCard} onClose={closeAllPopups}/>\n                <EditProfilePopup isOpen={isEditProfilePopupOpen} onClose={closeAllPopups} onUpdateUser={handleUpdateUser} currentUser={currentUser}/>\n              </ProtectedRoute>\n            }/>\n\n            <Route path=\"/signup\" element={\n              <Register submitButtonText=\"Зарегистрироваться\" onRegister={handleRegister}>\n              </Register>}\n            />\n\n            <Route path=\"/signin\" element={\n              <Login submitButtonText=\"Войти\" onLogin={handleLogin} loggedIn={loggedIn}>\n              </Login>\n            }/>\n\n          </Routes>\n\n\n        </div>\n    </CurrentUserContext.Provider>\n  );\n}\n\n\n\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport './index.css';\nimport App from './components/App';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n        <App/>\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n\n"],"sourceRoot":""}